{"componentChunkName":"component---node-modules-arcblock-gatsby-theme-docs-src-templates-documentation-js","path":"/zh/book/2-manage-chain-node/upgrade-chain","webpackCompilationHash":"9f0597eb53ba307d3327","result":{"data":{"file":{"changeTime":"3 days ago","childMarkdownRemark":{"frontmatter":{"author":"wangshijun","category":"book","date":null,"description":"Upgrade a Chain","draft":null,"keywords":"forge, forge-cli","language":"zh","layout":"documentation","path":"/zh/book/2-manage-chain-node/upgrade-chain","tags":["forge"],"title":"链的软升级"},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在"},{"type":"element","tagName":"a","properties":{"href":"/tutorials/hard-upgrade"},"children":[{"type":"text","value":"如何获取最新版的 Forge"}]},{"type":"text","value":"中我们介绍了如何进行 Forge 链的硬升级（需要重置本地链的状态），硬升级的做法在开发环境下比较方便，相当于清空数据库的记录。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"而有些时候，可能你的测试链跑了一段时间，上面产生了不少测试数据，重新产生这些测试数据可能费时费力，你既希望升级到最新版的 Forge，又希望保留之前启动过的链的状态，鱼与熊掌可以兼得么？答案是"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"肯定的"}]},{"type":"text","value":"，接下来我们来讨论具体的操作步骤。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在介绍升级步骤之前，我们有必要再次强调下链的升级在不同上下文的区别："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"在开发环境我们可以毫无顾虑的进行链的重置、升级、启停，因为你不会影响到其他人或者用户"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"在生产环境，因为整个区块链是分布式的网络，升级的动作需要由链的运营者来决定，而升级的结果需要在整条链的所有节点间同步"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"本文探讨的是前面一种情况，即开发环境下的具体做法。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"准备工作"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C","ariaLabel":"准备工作 permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"准备工作"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Forge CLI 是 ArcBlock 官方开发和维护的管理本地 Forge 链、节点的命令行工具，建议定期升级 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/ArcBlock/forge-cli"},"children":[{"type":"text","value":"Forge CLI"}]},{"type":"text","value":" 到最新版本："},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"npm install -g @arcblock/forge-cli"}]},{"type":"text","value":"。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"了解-forge-最新版本"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E4%BA%86%E8%A7%A3-forge-%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC","ariaLabel":"了解 forge 最新版本 permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"了解 Forge 最新版本"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"你读到这篇文章时，已经发布的最新的 Forge 版本是："},{"type":"element","tagName":"img","properties":{"src":"https://img.shields.io/badge/dynamic/json.svg?color=red&label=forge-release&query=%24.latest&url=http%3A%2F%2Freleases.arcblock.io%2Fforge%2Flatest.json"},"children":[]},{"type":"text","value":"。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"了解-forge-本地版本"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E4%BA%86%E8%A7%A3-forge-%E6%9C%AC%E5%9C%B0%E7%89%88%E6%9C%AC","ariaLabel":"了解 forge 本地版本 permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"了解 Forge 本地版本"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如果你想知道本地 Forge 链的版本，直接运行："},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge status"}]},{"type":"text","value":"，得到如下执行结果："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1000px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/e6a1ee89ba5bc8f9a6ed76d580777e89/6f2c5/forge-status.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 72.53623188405798%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0UlEQVQ4y5VU/VPaQBA9La0FKhjko1EGKiBYbO6LJCQQEk3b0c74//87r3scSrTI0B/e7N0m+/Ju315YI8xQm61Q1wlqaolGkKIqYnyRi5fcKcHxU7CxwtFE7wUrUWFJLsGuFdhQWoxoPZLb/TonbcFY7yVmxzcSZU/i063GZ0+hwtVLLHMbK1zi49SSHU32q2Tu4g6tSOMqn6I1F3Q8uUZdC9QIji9wNhM4+VEk/BfPz9gwf0InytBLY1I0p0KJDzdUPHiDIWH0Dq436qgVrJ/9QTsI4cYKZ77EZeKhHQmchxatiKNJyp1gm3u1phOUvYLCfvZIBTmplBikHi6WHO2YE5FAh2JnQfvI5i4Sjq8LC9Me89zkHV9tFfbSByK8pyKJ4Z1HLws06MtGpUvkVaHIEIUSwRxtJ8aFI3/7+UQkOdw5GUHyT8mIuqb1zJpSFZKiXLttnXzPlI3KYPUb3/0Fpj5Hf0qGbJpcbPgztiOzi3Sj0Et+YUIKr8IELg9xchsUBnf3aOydQ2fu4zzWaBqXQzOHCscT/YZUHwzWDDm6Kw+9zEM/M5GjIg67FTsJjZvdlGOQW4dN81/fiP8kNEPbXfE16WViZ6powCF/mCL+ApADpLRq6O4PAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"forge status","title":"forge status","src":"/static/e6a1ee89ba5bc8f9a6ed76d580777e89/42dbd/forge-status.png","srcSet":["/static/e6a1ee89ba5bc8f9a6ed76d580777e89/31a00/forge-status.png 250w","/static/e6a1ee89ba5bc8f9a6ed76d580777e89/70165/forge-status.png 500w","/static/e6a1ee89ba5bc8f9a6ed76d580777e89/42dbd/forge-status.png 1000w","/static/e6a1ee89ba5bc8f9a6ed76d580777e89/6f2c5/forge-status.png 1380w"],"sizes":["(max-width:","1000px)","100vw,","1000px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"其中红色圈圈中的版本就是当前链所使用的版本，我本地链的版本是 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v0.36.5"}]},{"type":"text","value":"。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"当然，你也可以执行："},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge ls"}]},{"type":"text","value":"，得到如下执行结果："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 718px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/82175552d911274fafec8eb7b5997acf/7005f/forge-ls.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 60.724233983286915%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABsElEQVQoz6WSy05TURSGdymRa4XGUloBaam1pfZK5bSc09a2VLCUhsNFmZjwHj6CAxgoYEx8BcUAMTJhwpGEZyC8yuc6TSPCyMLg3//aO3t9WXutrZLvD9j8coH50WJj/zdv9i1Wdy3efrZY37NYE5mfLDZl35A789tnbH095/DkB0cnB3z/+Y1fp8dcXZ7zYW8H5SnXCTSWiW8s8aS+xuTrd7iMFR4WTIaLJkPiLtFIebW179dNPC9NootNIgvLhGsN8Sappsljo4oazRUY10t4Z1/gzxfx5coMJjXUVFz0/FrBtofa5wHxYKItiSft8ySqO6YxnKviMRbxleq4tTI98RyOaBZH5B9Fb8Zdt+S0PTKDUuE0vuksMakspVfxZXTUswwOkbIv2LH4/0pNydMmUnmCeoVQqUYsk8cbSrRgjg5hLeAjAY5KX/yRNF7ReDiJK5y6O9Du2Ui+gitjMFZ4xYO49veZqkNYK6dPBuDX5/EbNQLyhYZmCtd9u0uF6mmaXoGO6TUmpEJ3ttjxIG4CJblHJusuLeCp1BmYvSfQXrqkb870HN0Cdia0ewH/ABW/baxGDEmgAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"forge ls","title":"forge ls","src":"/static/82175552d911274fafec8eb7b5997acf/7005f/forge-ls.png","srcSet":["/static/82175552d911274fafec8eb7b5997acf/31a00/forge-ls.png 250w","/static/82175552d911274fafec8eb7b5997acf/70165/forge-ls.png 500w","/static/82175552d911274fafec8eb7b5997acf/7005f/forge-ls.png 718w"],"sizes":["(max-width:","718px)","100vw,","718px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"其中红框圈出的版本也是当前链使用的版本，"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge ls"}]},{"type":"text","value":" 会列出本地已经下载过的所有可使用的 Forge 版本，并把当前使用的版本高亮出来。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"升级的前提是我们本地使用的版本比远程的最新版本低，如果两个版本相同的话，你可以到此打住啦，哈哈！"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"下载-forge-最新版"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E4%B8%8B%E8%BD%BD-forge-%E6%9C%80%E6%96%B0%E7%89%88","ariaLabel":"下载 forge 最新版 permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"下载 Forge 最新版"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如果要把本地 Forge 链从 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v0.36.5"}]},{"type":"text","value":" 升级到 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v0.37.0"}]},{"type":"text","value":"，需要先下载 Forge  "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v0.37.0"}]},{"type":"text","value":" 的全部组件，执行如下命令："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"],"download":true,"latest":""},"children":[{"type":"text","value":"forge download latest\n\n# 中国用户\nforge download latest --mirror http://arcblock.oss-cn-beijing.aliyuncs.com\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1000px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/fad8dfe8fa982d09f0e18f3e04f2472f/8873e/forge-download.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 53.73134328358209%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACGElEQVQoz12SWVcaQRCFB00iQWWTbZhhdUBNjAFZZhhg2HFJfPEhniMKop78/39wc6tZTpKHe6qme7r661ulpZwWCt4I2c4ERmuItDNAvO4h+N3F52829r424WcMXDhKkmvl6j/ynVxupRl2H5Y7Qp4x1+yhwIJmrYNY1UWg4uKg2oafhXynta12z2rY4eEd+ZYif1+QIFWmd410dwqdlCZzU2h/3uP0/TdOlu84ni9hLV5RenlTyk3vYLTHyHhXCPLCj18a2GXxD2d1aHG7h3R7giQLJ50hdNKm+XOSUe9fQx/cwBjeIuFNEeFatD1CiC8J17qI0JqDytqa8yajA00O5vs3MEloCCFjXgqxaP7XoyKynpc4fn5B4WmBotDOFmpfLs7xRVLIt7ZAi5FQd8dISDPsgSIVShVZOEUZo1vEuxOE3SEJx4hw77DSRuiyoygDFy3VLP+5LYTDLWFGRF82hIWHJ5TonUW6IukKszmKzK3HufJQrMqSUJ4tTRIflYdyWIiEMiXeUanWaPUsepimh+b4B2KkFEJRkD5uCA+Vjw59/I9QlO1dKcocZVJFUpXZ6fLyTXVbCMuv7PzDbDUNVJb/HTV6K8Joo6O8izY8pVizr0gjXAvxpwglfgVIsE+v9mXAmX/iqAiR+LfSeuiPiC7YCY6MjEKUeZhrSRbXm13otock10P11d5mVKSIIrIq0EobVfEHrK9XG8MlvAsAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"forge download","title":"forge download","src":"/static/fad8dfe8fa982d09f0e18f3e04f2472f/42dbd/forge-download.png","srcSet":["/static/fad8dfe8fa982d09f0e18f3e04f2472f/31a00/forge-download.png 250w","/static/fad8dfe8fa982d09f0e18f3e04f2472f/70165/forge-download.png 500w","/static/fad8dfe8fa982d09f0e18f3e04f2472f/42dbd/forge-download.png 1000w","/static/fad8dfe8fa982d09f0e18f3e04f2472f/475a9/forge-download.png 1500w","/static/fad8dfe8fa982d09f0e18f3e04f2472f/8873e/forge-download.png 1943w"],"sizes":["(max-width:","1000px)","100vw,","1000px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"可能有人会问，"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge download"}]},{"type":"text","value":" 和 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge install"}]},{"type":"text","value":" 有啥区别？两者都会从我们的镜像下载指定版本（或最新版）的 Forge，不同点在于 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge download"}]},{"type":"text","value":" 只会下载，而 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge install"}]},{"type":"text","value":" 下载完之后会把本地使用的 Forge 版本切换到刚下载的版本，硬升级的时候用的就是 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge install"}]},{"type":"text","value":"。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"怎么确定有没有切换本地当前使用的 Forge 版本？再次执行 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge ls"}]},{"type":"text","value":"："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 844px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/96ba36a3b5f8e3b9e52e95cc32f3a2b4/05f79/forge-ls2.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 55.45023696682464%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAA9klEQVQoz6WSW4+CMBCFCyY+GE2UFSNeNtlVxCiutqICQjFe2P//i85O94ILPgkPJ2lOe77OTMvanoex5BhGAt39CfXlHmzGoTkCrCDlaWqvIPbnO7RWkGGcoh9dMZKfMDyZAdWBXPA3/HDRf59NN3jZxngLL7B2yU+oSoXjiYsZD7AMEix2EUaTFfTcIfGU2ODdhStCLPwEnGTZ63vLZYA1CpkEsebiW7XCXJ4Gdg8nmDS/3vGKDj0QszfZ/MpVON/CJNBrdMMgOENXZglQBmQ2R8uL0ZMpDAJqlYEUblLbbXlDh/6iThVXBjZWPpofPlrrsDLwC3l/L7j++gTdAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"forge ls2","title":"forge ls2","src":"/static/96ba36a3b5f8e3b9e52e95cc32f3a2b4/05f79/forge-ls2.png","srcSet":["/static/96ba36a3b5f8e3b9e52e95cc32f3a2b4/31a00/forge-ls2.png 250w","/static/96ba36a3b5f8e3b9e52e95cc32f3a2b4/70165/forge-ls2.png 500w","/static/96ba36a3b5f8e3b9e52e95cc32f3a2b4/05f79/forge-ls2.png 844w"],"sizes":["(max-width:","844px)","100vw,","844px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"可以看到，被高亮的还是 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v0.36.5"}]},{"type":"text","value":"。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"配置链管理员"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E9%85%8D%E7%BD%AE%E9%93%BE%E7%AE%A1%E7%90%86%E5%91%98","ariaLabel":"配置链管理员 permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"配置链管理员"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"对于区块链来说，所使用软件的版本其实相当于安装在电脑硬件上的操作系统，如果要升级操作系统的版本，我们要输入管理员密码、把操作系统停下来、重新启动完成升级，如果你经历过操作系统的升级，Forge 链的升级就很好理解。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"首先，我们需要给链配置 1 个管理员（moderator，本意是协调员，因为区块链本身需要在多节点，在多节点间达成共识需要协调员），而任何能够修改链状态的实体本质都是一个钱包，即公私钥对，对于没有配置过链管理员的同学，需要先用 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge wallet:create --defaults"}]},{"type":"text","value":" 来生成一个管理员钱包，并且保存好钱包私钥。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1000px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/ca9aabd957b91ed3938e19940b1f4f93/c3e47/moderator-wallet.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 44.972826086956516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABbUlEQVQoz42R2XKCQBBFSUXjQ9wwLuWCxrgrMDOIIK4YNVXx///nppvBPOTBysOp7mmoM7fBqHseekqh4WyICNVFgJa7RltEeJ56MMYKTxPv3xg5kpT9GCXhwFSMi8xUwhgRk7tMJRjje/9AmJn5aG3OsI4SnYNAdkFDfjD+i/oVP8LI2SHMIEbOXsH0XbwKicxMITtXSU2Y61TG8AGjlIa3g727oroM0d47GJwdDC+MjY9Pfe5TbW4F6hGxFqiFAtWACDVlXyYBXhaUsKg2GJ5uqAVHdPaLRGIdHfTiVHq28X5yEkZXG+Mvm+QuSYm1i7fA1XKishIw8mqLbnxDJTiQaJ4kGpCkm0r7nzb6JLMOum/vXZSXkj6PQFFJFIiiRymXnJSEZRJOTt+w1ic0I4XBRafgRLwqnzkZ9/dLeO0SCVh6h4UmJ2w6ITwVQbghavMl/SBeQ9/GL/Ia1VDPeC09k8hLmUgLaS2lKX8A4WoE6mGtXPQAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"moderator wallet","title":"moderator wallet","src":"/static/ca9aabd957b91ed3938e19940b1f4f93/42dbd/moderator-wallet.png","srcSet":["/static/ca9aabd957b91ed3938e19940b1f4f93/31a00/moderator-wallet.png 250w","/static/ca9aabd957b91ed3938e19940b1f4f93/70165/moderator-wallet.png 500w","/static/ca9aabd957b91ed3938e19940b1f4f93/42dbd/moderator-wallet.png 1000w","/static/ca9aabd957b91ed3938e19940b1f4f93/c3e47/moderator-wallet.png 1472w"],"sizes":["(max-width:","1000px)","100vw,","1000px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"为了后续方便，我们先把链管理员私钥配置到环境变量里面，把下面这行加到你的 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"~/.bashrc"}]},{"type":"text","value":" 或者 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"~/.zshrc"}]},{"type":"text","value":" 里面（记得把私钥换成你生成的那个）："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"],"FORGE_MODERATOR_SK":"qDWzV5cv8wSa-I2CKiLHm3msM9GeYyjOo4yo3iNicT8xlZqcdY_o0REVnffjD_wq85sCjoka6B7D-BLPxcXUcA"},"children":[{"type":"text","value":"export FORGE_MODERATOR_SK=\"qDWzV5cv8wSa-I2CKiLHm3msM9GeYyjOo4yo3iNicT8xlZqcdY_o0REVnffjD_wq85sCjoka6B7D-BLPxcXUcA\"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如何确保你正确把管理员私钥导出到了环境变量里面？直接执行 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"echo $FORGE_MODERATOR_SK"}]},{"type":"text","value":"，如果有结果输出并且和你生成的私钥相同，说明配置正确。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"接下来我们需要把链管理员信息添加到 Forge 的配置里面："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"如果你使用的是 Forge CLI v0.36.0 以下的版本，并且按本文操作时没有升级到最新版，你的配置文件在："},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"~/.forge_release/forge_release.toml"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"如果你使用的是 Forge CLI v0.36.0 及以上版本，你的配置文件在："},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"~/.forge_chains/forge_default/forge_release.toml"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"当然，我们有更简单的方式，直接获取 Forge 链配置文件的路径："},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge config | grep file"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1000px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/d72682e540c7eb500381ee1276db7bbe/ebba5/forge-config.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 5.179856115107913%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAATUlEQVQI12MQtTD7L2dn81/R2O6/hIX9f0lr8/+SVi7/hc3s/wua2P7nMbD6z2do/Z/f2PY/n5HNf34gFjSxA9MgzAuUE4DKsWub/QcAtlgeF5dOZtcAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"forge config","title":"forge config","src":"/static/d72682e540c7eb500381ee1276db7bbe/42dbd/forge-config.png","srcSet":["/static/d72682e540c7eb500381ee1276db7bbe/31a00/forge-config.png 250w","/static/d72682e540c7eb500381ee1276db7bbe/70165/forge-config.png 500w","/static/d72682e540c7eb500381ee1276db7bbe/42dbd/forge-config.png 1000w","/static/d72682e540c7eb500381ee1276db7bbe/ebba5/forge-config.png 1390w"],"sizes":["(max-width:","1000px)","100vw,","1000px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"需要把什么内容添加到 Forge 的配置文件里呢？我们不妨直接运行 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge upgrade"}]},{"type":"text","value":" 试试："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1000px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/1670aa388b7df59a7d123a4702ed7d5d/0aa48/forge-upgrade1.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 21.78834182229768%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAsklEQVQY04XPSwuCUBAF4FsbewkVUnk1I0NLqHyFekvtpdH//0OnSReCLVp8HOZsZobNxBl6/sDiXGAcZpXJKYcSXTGt8ob+IQGzfTCrzfvtuChhpC/olwLr6xsm0WnmaQmVOjWjzF8YhhdIhxg9N2l4os5j07G5E8JwAmhEtT1wy8WANndIl66SaJbJaBvUdi2tnllpgUVyx5Ku+dLEE6v4BpNe3hBOW5V9BHnr12//8QGsQnQQ+pUdJAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"forge upgrade1","title":"forge upgrade1","src":"/static/1670aa388b7df59a7d123a4702ed7d5d/42dbd/forge-upgrade1.png","srcSet":["/static/1670aa388b7df59a7d123a4702ed7d5d/31a00/forge-upgrade1.png 250w","/static/1670aa388b7df59a7d123a4702ed7d5d/70165/forge-upgrade1.png 500w","/static/1670aa388b7df59a7d123a4702ed7d5d/42dbd/forge-upgrade1.png 1000w","/static/1670aa388b7df59a7d123a4702ed7d5d/475a9/forge-upgrade1.png 1500w","/static/1670aa388b7df59a7d123a4702ed7d5d/0aa48/forge-upgrade1.png 1767w"],"sizes":["(max-width:","1000px)","100vw,","1000px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"可以看到，Forge CLI 提示我们配置文件里面没有管理员相关的配置，并且提示我们要把什么内容添加进去："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-toml"]},"children":[{"type":"text","value":"[forge.moderator]\naddress = \"z1ScT4nkbA8b6cQBKQoyWTnnQnXAsmPsdhk\"\npublicKey = \"MZWanHWP6NERFZ334w_8KvObAo6JGugew_gSz8XF1HA\"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"打开 Forge CLI 给出的配置文件路径，把上面的配置追加到文件的末尾，保存后退出。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"重新启动"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8","ariaLabel":"重新启动 permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"重新启动"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"因为我们添加管理员的操作修改了链的配置，为了是配置生效，需要重新启动 Forge 链，依次执行如下两条命令："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge stop\nforge start\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"重新启动之后，包含了管理员的配置被加载到 Forge 的运行配置中，接下来我们就可以以管理员的身份往链上发送升级的指令。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"开始升级"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E5%BC%80%E5%A7%8B%E5%8D%87%E7%BA%A7","ariaLabel":"开始升级 permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"开始升级"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"万事俱备，接下来再次运行："},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge upgrade"}]},{"type":"text","value":"，如下图需要做出几个升级的配置："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"要升级到的版本，选择 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v0.37.0"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"在哪个块高升级，可以根据当前的块高加上适当的增量，比如当前块高 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"33"}]},{"type":"text","value":"，我们就在 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"53"}]},{"type":"text","value":" 块高出升级，如果出块时间配置的是 3 秒，意味着 1 分钟之后会发生升级"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"确认升级操作，因为这个操作是不可逆的，如果到这里后悔了，输入 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"N"}]},{"type":"text","value":" 或者 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Ctrl + C"}]},{"type":"text","value":" 即可中止"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1000px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/7bac8edd121f15458140cea5163ab270/14ef1/forge-upgrade2.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 85.22522522522523%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACD0lEQVQ4y51U6XLaMBg04b4JmISBMAmU4EMyNjLGhIQ0M33/Z9quZKDQNIHpj52VZGu13yFZDeGjEyq0Fy/IzRawpgGsJ3mOiUaA3FQix7HhE+g92Zh7636ClkzREAmqwRoVf4Xic4SKqwxqbmzmObPpMiw7fsVo84H7ZIfh+idG6QcGqx366hVdoh2/oS7XKMxCuhV7t/+Gdm/ZKsV4+wuD9TuGWoyiNsUHHI95mBOluJMJCvPIiGq3BxSewyPfkE26OmFCN2/oLrfoEbfRC5rkMkPveAojJ0LPY9ieOqahynlVjx09j83aLf/La8GSszQLZbJ2cGOKwtAeRcbfQh45RzYhN5mf9mKDhtygLlLUPIZH+2VHGVTpoKCrP5HfF+OAJivcDmIMlIfhSsBeSrQCyUMCQjI85may+NQqX8FqBimrusLTZoqHZE6HHsquj5rvUSwb52c6tOAy2KtWi73XV4qtIdAOXbrz0I1c9GOHBXLRUw6danH/DBX3Dx/G5uBMcMf8UdQXzJv+QZifSk7G2dr5ZsP628m6EdSJt9WWefTRlJ4RuSq8r0LW1btP3nGnNrBDh416cm//A1ZxnrVIiVyZC+R/nAoGF9vlU/vUvJV5GG60+qPYvyZBxpPzl+QqwZK7RJHNW+J1sni9LP0I7IUOTjO+UrDPxp0GCcb63u4xZPgPPKhyxQ35G78BCTfMIAxt+7wAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"forge upgrade2","title":"forge upgrade2","src":"/static/7bac8edd121f15458140cea5163ab270/42dbd/forge-upgrade2.png","srcSet":["/static/7bac8edd121f15458140cea5163ab270/31a00/forge-upgrade2.png 250w","/static/7bac8edd121f15458140cea5163ab270/70165/forge-upgrade2.png 500w","/static/7bac8edd121f15458140cea5163ab270/42dbd/forge-upgrade2.png 1000w","/static/7bac8edd121f15458140cea5163ab270/14ef1/forge-upgrade2.png 1110w"],"sizes":["(max-width:","1000px)","100vw,","1000px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"回车确认之后，Forge CLI 会用管理员的身份往 Forge 链发送 1 个 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"UpgradeNode"}]},{"type":"text","value":" 的交易，交易被成功打包之后，Forge 链会在预设的高度停下来，然后 Forge CLI 检测到 Forge 链完全停止之后会再次把链启动起来，这样就完成了整个升级的过程。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"验证升级"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E9%AA%8C%E8%AF%81%E5%8D%87%E7%BA%A7","ariaLabel":"验证升级 permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"验证升级"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如何验证升级是成功的呢？再次执行 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"forge status"}]},{"type":"text","value":"，"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 865px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/cc787f9b77200e9b29011fa83d59091c/a8359/forge-upgrade3.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 107.74566473988439%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAACT0lEQVQ4y51Ua1faUBBMQUQLUkCioLyJeedCEiA89XiO7f//R9Pde4nQlmjjh2FvCBlmdnajlb0IZZHgMliiYEyhDX1ooyAT38ZcfVnPQbu0QhTNKUq2QNEIcGF4uHg6omj4Euk5Jcsi1a7tGHUxRyuycL8wZP0hbDRnFhozG/WpjVqgrm8C5/CgnwEirHgLPK5eUfWXROjQwwKFCakiaMPgX/zdhpPvmVSrUe+G+1/oLhL0k4iIQ1Jio+q5uDR9lMhqyfRUPUC1QCG9r9pBxDekbLB9QytMcBcb6G8mpPgJ3TVhQ9dbA4PdRILP3bWB3lYhvc/nR/p92SLSijsnq3vczV/QEAKdyESF1FU9B9eOK9Vy5TYwODRWlIZ2VEzXFKpWI4Wj3Rv0eIvO0obxMkEnUQrbS1MqaC8tNEMChVQYZ/RypJLXKkTY2/+ETirrwsOV7UAbq1CkqrGqJanI/zxlneZQzNYwvRiucDF2ApSMmfq3DBUfzmGF5nC8ecZw9Yx2tELDCyndqbSVqeKjTeEPfWHjgXrW3xlUCZTyd8d7n62shzMIfdlwPTZlCPcLkxJXSX+m5iwhq+AVY1Ima8wcOdDaUJz0KydhK7ZoMNWQMloRJT0SJ3b9fJaZkNX1aPIfEosG139PWe7n6P+tS0K2fHvooz63ZA/rU4cm388djLTM/eNkeYeZtBnatJfHhc9tWSfLbHdAY1P1aFwG6Xr5X7Ms7ZJN3uHbSKn7U1kOhYWJoJeqK9/K8k1N5Ny/o6qcc3hlR2f29mD1C4P9GxepUnnwb+35AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"forge upgrade3","title":"forge upgrade3","src":"/static/cc787f9b77200e9b29011fa83d59091c/a8359/forge-upgrade3.png","srcSet":["/static/cc787f9b77200e9b29011fa83d59091c/31a00/forge-upgrade3.png 250w","/static/cc787f9b77200e9b29011fa83d59091c/70165/forge-upgrade3.png 500w","/static/cc787f9b77200e9b29011fa83d59091c/a8359/forge-upgrade3.png 865w"],"sizes":["(max-width:","865px)","100vw,","865px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"检查当前链状态里面的版本号，已经变成了升级后的版本。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"如果遇到问题？"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%E5%A6%82%E6%9E%9C%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%EF%BC%9F","ariaLabel":"如果遇到问题？ permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"如果遇到问题？"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"到这里，Forge 链软升级的准备、升级、验证环节都走完了，你升级成功了么？如果遇到问题，欢迎到 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/ArcBlock/forge-cli"},"children":[{"type":"text","value":"Forge CLI"}]},{"type":"text","value":" 的官方仓库提 Issue。"}]}],"data":{"quirksMode":false}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"9613fbec-93e9-5d1f-85ed-a666411cdf3b","language":"zh","locale":"zh","languages":[{"value":"en","text":"ENG"},{"value":"zh","text":"中文"}],"headings":[{"value":"准备工作","depth":2},{"value":"了解 Forge 最新版本","depth":2},{"value":"了解 Forge 本地版本","depth":2},{"value":"下载 Forge 最新版","depth":2},{"value":"配置链管理员","depth":2},{"value":"重新启动","depth":2},{"value":"开始升级","depth":2},{"value":"验证升级","depth":2},{"value":"如果遇到问题？","depth":2}],"navItems":[{"group":"/Users/wangshijun/Develop/arcblock/forge-cli-handbook/src","title":"HandBook","priority":999,"link":"/book/"}],"version":"v0.7.0","originalPath":"/zh/book/2-manage-chain-node/upgrade-chain","sidebarContent":[{"title":null,"pages":[{"title":"Forge CLI 使用手册","path":"/zh/book/"}]},{"title":"入门","pages":[{"title":"开始的开始","path":"/zh/book/1-introduction"},{"title":"Forge CLI 是什么？","path":"/zh/book/1-introduction/what-is-forge-cli"},{"title":"Forge CLI 的设计理念","path":"/zh/book/1-introduction/why-forge-cli"},{"title":"如何安装 Forge CLI？","path":"/zh/book/1-introduction/install-forge-cli"},{"title":"Forge CLI 极简入门","path":"/zh/book/1-introduction/getting-started"},{"title":"Forge CLI 初始配置","path":"/zh/book/1-introduction/initial-setup"}]},{"title":"Forge 版本管理","pages":[{"title":"理解 Forge 发行版本","path":"/zh/book/4-manage-forge-release"},{"title":"查找 Forge 发行版本","path":"/zh/book/4-manage-forge-release/find-release"},{"title":"获取 Forge 发行版本","path":"/zh/book/4-manage-forge-release/download-install-release"}]},{"title":"链节点管理","pages":[{"title":"理解节点和链","path":"/zh/book/2-manage-chain-node"},{"title":"链的创建和配置","path":"/zh/book/2-manage-chain-node/create-config-chain"},{"title":"链的启动和停止","path":"/zh/book/2-manage-chain-node/start-stop-chain"},{"title":"查看链的状态","path":"/zh/book/2-manage-chain-node/inspect-chain-status"},{"title":"查看链节点日志","path":"/zh/book/2-manage-chain-node/view-chain-log"},{"title":"链的软升级","path":"/zh/book/2-manage-chain-node/upgrade-chain"},{"title":"链的重置和删除","path":"/zh/book/2-manage-chain-node/reset-remove-chain"}]},{"title":"读写链上数据","pages":[{"title":"读写链上数据","path":"/zh/book/3-read-write-on-chain-data"},{"title":"查询交易","path":"/zh/book/3-read-write-on-chain-data/inspect-transactions"},{"title":"查询区块","path":"/zh/book/3-read-write-on-chain-data/inspect-blocks"},{"title":"查询账户","path":"/zh/book/3-read-write-on-chain-data/inspect-accounts"},{"title":"查询资产","path":"/zh/book/3-read-write-on-chain-data/inspect-assets"},{"title":"查询合约","path":"/zh/book/3-read-write-on-chain-data/inspect-contracts"}]},{"title":"使用钱包和账户","pages":[{"title":"区分钱包和账户","path":"/zh/book/5-manipulate-wallets-accounts"},{"title":"操作本地钱包","path":"/zh/book/5-manipulate-wallets-accounts/local-wallets"},{"title":"使用远程钱包","path":"/zh/book/5-manipulate-wallets-accounts/on-chain-accounts"}]},{"title":"使用智能合约","pages":[{"title":"理解 Forge 中的合约","path":"/zh/book/6-working-with-contracts"},{"title":"编译并部署合约","path":"/zh/book/6-working-with-contracts/compile-deploy-contract"},{"title":"启用或禁用合约","path":"/zh/book/6-working-with-contracts/activate-deactivate-contract"},{"title":"创建自己的合约","path":"/zh/book/6-working-with-contracts/create-own-contract"}]},{"title":"使用基石程序","pages":[{"title":"理解基石程序","path":"/zh/book/7-working-with-blocklets"},{"title":"查找基石程序","path":"/zh/book/7-working-with-blocklets/what-are-blocklets"},{"title":"使用 dApp 基石程序","path":"/zh/book/7-working-with-blocklets/dapp-blocklets"},{"title":"使用 Starter 基石程序","path":"/zh/book/7-working-with-blocklets/starter-blocklets"},{"title":"使用合约基石程序","path":"/zh/book/7-working-with-blocklets/contract-blocklets"},{"title":"创建和发布基石程序","path":"/zh/book/7-working-with-blocklets/creating-blocklet"}]},{"title":"探索其他工具","pages":[{"title":"工具箱列表","path":"/zh/book/8-explorer-other-tooling"},{"title":"节点区块浏览器","path":"/zh/book/8-explorer-other-tooling/forge-web"},{"title":"流量模拟器","path":"/zh/book/8-explorer-other-tooling/simulator"},{"title":"dApps Workshop","path":"/zh/book/8-explorer-other-tooling/dapp-workshop"},{"title":"同构链跨链服务","path":"/zh/book/8-explorer-other-tooling/forge-swap-service"}]},{"title":"高级用法","pages":[{"title":"Forge CLI 高级用法","path":"/zh/book/9-customization"}]},{"title":"问题诊断","pages":[{"title":"故障排查技巧","path":"/zh/book/10-troubleshooting"}]}],"gitterPath":"https://gitter.im/ArcBlock/community","githubUrl":"https://github.com/ArcBlock/forge-cli-handbook/tree/master/src/2-manage-chain-node/upgrade-chain/index.zh.md"}}}